\documentclass[a4paper,11pt]{ydoc}
\usepackage{pdfpages}
\usepackage[T1]{fontenc}
\lstset{basicstyle=\small\ttfamily,language={[LaTeX]TeX},numbers=none,columns=fullflexible}

\begin{document}
\begin{center}
\par\noindent%
\lstinputlisting[language={[latex]tex},gobble=4,numbers=none,caption={},frame=lines,firstline=2]{example-common.tex}
%\begin{minipage}{\textwidth}
%  \begin{lstlisting}[language={[latex]tex},gobble=4,frame=lines,caption={},numbers=none]
%     \usepackage{newrevisor}
%     \newrevisor{manuel}{violet!75}
%     \newrevisor{maria}{blue}
%     \newrevisor{peter}{green!80!black}[red]
%     \begin{document}
%     This is \manuel{text-to-be-deleted}{text-to-be-added}.\MANUEL{This is a note}
%       \footnote{This is a footnote.\MANUEL*{this is a note in the footnote}}
      
%       This is \maria{text-to-be-deleted}{text-to-be-added}.\MARIA{This is a note}
%       \footnote{This is a footnote.\MARIA*{this is a note in the footnote}}
      
%       This is \peter{text-to-be-deleted}{text-to-be-added}.\PETER{This is a note}
%       \footnote{This is a footnote.\PETER*{this is a note in the footnote}}

%       \begin{figure}[h!]
%         \centering
%         A FIGURE
%         \caption{Caption \manuel{and}{with} note\MANUEL*{note}}
%         \label{fig:test}
%       \end{figure}
%     \end{document}
% \end{lstlisting}
% \end{minipage}
\newpage
\lstinputlisting[language={[latex]tex},gobble=4,numbers=none,caption={},frame=lines,firstline=2]{test-default.tex}
\includepdf[frame,width=\textwidth,pages=-]{test-default.pdf}
\newpage
\begin{raggedright}
  Same as above but with option \verb|hide=after|\\[2em]
\end{raggedright}
\par\noindent%
\begin{minipage}{\textwidth}
\begin{lstlisting}[language={[latex]tex},gobble=4,frame=lines,caption={},numbers=none]
    \usepackage[hide=after]{newrevisor}
\end{lstlisting}
\end{minipage}
\newpage
\includepdf[frame,width=\textwidth,pages=-]{test-default-hide-after.pdf}
\newpage
  \begin{raggedright}
    Same as above but with option \verb|hide=before|\\[2em]
  \end{raggedright}
\par\noindent%
\begin{minipage}{\textwidth}
\begin{lstlisting}[language={[latex]tex},gobble=4,frame=lines,caption={},numbers=none]
    \usepackage[hide=before]{newrevisor}
\end{lstlisting}
\end{minipage}
\includepdf[frame,width=\textwidth,pages=-]{test-default-hide-before.pdf}
\newpage
  \begin{raggedright}
    With option \verb|todonotes|\\[2em]
  \end{raggedright}
\par\noindent%
\begin{minipage}{\textwidth}
\begin{lstlisting}[language={[latex]tex},gobble=4,frame=lines,caption={},numbers=none]
    \usepackage[todonotes]{newrevisor}
\end{lstlisting}
\end{minipage}
\includepdf[frame,width=\textwidth,pages=-]{test-todonotes.pdf}
\end{center}
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
